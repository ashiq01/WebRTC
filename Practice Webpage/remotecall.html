<html>
<head>
<style>
video {
  border:5px solid black;
  width:480px;
  height:360px;
}
button {
  font: 18px sans-serif;
  padding: 8px;
}
textarea {
  font-family: monospace;
  margin: 2px;
  width:100px; 
}

td{border-left:2px solid black;
padding-left:10px;
}
    
    span{margin-left:10px;}
    
  </style>
</head>
<body>

<video id="vid1" autoplay></video>
<video id="vid2" autoplay></video>
<br />

<span>offer<textarea id="offer1"></textarea></span>
<span>answer<textarea id="answer1"></textarea></span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          
<span>candidate to send:<textarea id="cds"></textarea></span>
<span>candidate recieved:<textarea id="cdr"></textarea></span>
<br />
<br />
<h3>client 1: client creating offer; client 2:client accepting offer and generatin answer</h3><h4>call setup mechanism: <a href="http://www.html5rocks.com/en/tutorials/webrtc/basics/">http://www.html5rocks.com/en/tutorials/webrtc/basics/</a></h4>
<br />
<br />
<table>
	<tr><td><h1>Client 1</h1> <h2>Step 1</h2><button onclick="offer();">Create offer</button>
	<h2>Step 2</h2>Copy Generated offer from 'offer' textbox to 'offer ' textbox of 2nd client
	<h2>Step 3</h2>copy answer generated by client 2 to 'answer' textbox and click acceptAnswer<br /><button onclick="acceptAnswer();">acceptAnswer</button>
	<h2>Step 4</h2>Click startIce <br/>	<button onclick="pc.startIce();">startIce()</button>
	<h2>Step 5</h2>copy generated ice-candidate from the 'candidate to  send' box to client 2's 'candidate recieved' box
	<h2>Step 6</h2>click process candidate<button onclick="processCandidate();">process recieved candidate</button>
	</td>
	<td><h1>Client 2</h1>
	<h2>Step 1</h2>copy the offer generated by client 1 to offer box and click answer <br /><button onclick="answer();">answer</button><br />
	copy the generated answer to client 1's answer box	
	<h2>Step 2</h2>Click startIce <br/>	<button onclick="pc.startIce();">startIce()</button>
	<h2>Step 3</h2>copy generated ice-candidate from the 'candidate to  send' box to client 1's 'candidate recieved' box
	<h2>Step 4</h2>click process candidate<br /><button onclick="processCandidate();">process recieved candidate</button>
	</td></tr>
</table>

<!--
<button onclick="offer();" disabled="true">offer</button>
<button onclick="answer();" disabled="true">answer</button>
<button onclick="acceptAnswer();" disabled="true">acceptAnswer</button>
<button onclick="pc.startIce();" disabled="true">startIce()</button>
-->

<!--<button onclick="processCandidate();" disabled="true">process recieved candidate</button>-->

<script type="text/javascript" defer="true">
navigator.webkitGetUserMedia({video:true,audio:true},function(strm){localstream=strm;vid1.src=webkitURL.createObjectURL(strm)},function(){console.warn("error");});
function offer(){
console.log("creating offer")
pc=new webkitPeerConnection00("STUN stun.l.google.com:19302",icecallback)
pc.onaddstream=gotremotestream
pc.addStream(localstream)
offer = pc.createOffer(null)
pc.setLocalDescription(pc.SDP_OFFER,offer)
console.log(offer.toSdp())
offer1.value=offer.toSdp();
}
function answer(){
pc=new webkitPeerConnection00("STUN stun.l.google.com:19302",icecallback)
pc.onaddstream=gotremotestream
pc.addStream(localstream);
pc.setRemoteDescription(pc.SDP_OFFER,new SessionDescription(offer1.value));
answer=pc.createAnswer(offer1.value,{has_audio:true,has_video:true})
pc.setLocalDescription(pc.SDP_ANSWER,answer)
answer1.value=answer.toSdp();
}
function acceptAnswer(){
pc.setRemoteDescription(pc.SDP_ANSWER,new SessionDescription(answer1.value))
}
function icecallback(candidate,bMore){//don't know whats the use of second argument true
cds.value=candidate.toSdp();

}
function processCandidate(){
pc.processIceMessage(new IceCandidate("1",cdr.value));//1st argument-candidate label, second argument-candidate sdp

}
function gotremotestream(e){
vid2.src=webkitURL.createObjectURL(e.stream)
}
</script>
</body>
</html><span style="font-size: smaller;"><span style="font-size: smaller;"><span style="font-size: smaller;"></span></span></span>